<!-- <ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#f8500c" type="square-loader" [fullScreen]="true">
  <p style="color: white"> Loading... </p>
</ngx-spinner> -->

<div class="container mt-5">
    <div class="card pb-3">
        <div class="d-flex card-header card-header-icon" data-background-color="rose">
            <i class="material-icons backNav" style="cursor: pointer;" [routerLink]="''">keyboard_arrow_left</i>
            <h4 class="card-title"> Medicine Name : <span class="orgName">{{medicineInfo.name}}</span></h4>
            <button class="btn btn-success m-1 pull-right" data-toggle="modal" data-target="#editMedicineModel">Edit Medicine</button>
        </div>
        <!-- <div class="card-content">
          <h4 class="card-title">OrganizationName:<span class="orgName">{{medicineInfo.name}}</span></h4>
      </div> -->

        <div class="row col-md-12 ">
            <div class="col-md-12">
                <table class="table">
                    <tbody>
                        <tr>
                            <td class="feildName label-bold">Name</td>
                            <td>{{medicineInfo?.name}}</td>
                            <td class="feildName label-bold">Brand</td>
                            <td>{{medicineInfo?.brand}}</td>
                        </tr>
                        <tr>
                            <td class="feildName label-bold">Price</td>
                            <td>{{medicineInfo?.price}}</td>
                            <td class="feildName label-bold">Exp Date</td>
                            <td>{{medicineInfo?.expDate}}</td>
                        </tr>
                        <tr>
                            <td class="feildName label-bold">Quantity</td>
                            <td>{{medicineInfo?.quantity}}</td>
                            <td class="feildName label-bold">Notes</td>
                            <td>{{medicineInfo?.notes}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editMedicineModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Edit Medicine</h4>
            </div>
            <div class="modal-body">
                <form [formGroup]="medicine">
                    <div class="col-md-12">
                        <mat-form-field class="col-md-6 mb-1">
                            <mat-label>Name</mat-label>
                            <input type="text" formControlName="name" autocomplete="off" matInput #name placeholder="Please Enter Medicine Name" required>
                            <mat-error>Name is required!</mat-error>
                        </mat-form-field>

                        <mat-form-field class=" col-md-6 mb-1">
                            <mat-label>Brand</mat-label>
                            <input type="text" formControlName="brand" autocomplete="off" matInput #brand placeholder="Please Enter Medicine Brand" required>
                            <mat-error>Brand Is Required!</mat-error>
                        </mat-form-field>

                    </div>
                    <div class="col-md-12">
                        <mat-form-field class="col-md-6 mb-1">
                            <mat-label>Price</mat-label>
                            <input type="number" formControlName="price" autocomplete="off" matInput #price placeholder="Please Enter Medicine Price" required>
                            <mat-error>Price Required!</mat-error>
                        </mat-form-field>
                        <mat-form-field class="col-md-6 mb-1">
                            <mat-label>Quantity</mat-label>
                            <input type="text" formControlName="quantity" autocomplete="off" matInput #quantity placeholder="Please Enter Medicine Quantity" required>
                            <mat-error>Quantity Required!</mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col-md-12">
                        <mat-form-field class="col-md-6 mb-1">
                            <mat-label>Exp Date</mat-label>
                            <input matInput [matDatepicker]="picker1" formControlName="expDate" (dateChange)="dateFilter($event.value)" [min]="minDateStart">
                            <mat-datepicker-toggle matSuffix [for]="picker1" matSuffix></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                            <p *ngIf="showDateValidation" class="validateDate">
                                Medicine will expire with in 30 days.
                            </p>
                        </mat-form-field>

                        <mat-form-field class="col-md-6 mb-1">
                            <mat-label>Notes</mat-label>
                            <input type="text" formControlName="notes" autocomplete="off" matInput #notes placeholder="Please Enter Medicine notes" required>
                            <mat-error>Notes Required!</mat-error>
                        </mat-form-field>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button #closeModel type="button" class="btn btn-dark" data-dismiss="modal">Close</button>
                <button class="btn btn-success m-1 " (click)="UpdateMedicine()">Update Medicine</button>
            </div>
        </div>
    </div>
</div>